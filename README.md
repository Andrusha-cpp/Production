# Тотализатор Мисс РФиКТ

Веб‑приложение на Django: авторизация по email, просмотр участниц конкурса, ставки с расчётом коэффициента и личный кабинет.

## Реализованные функции
- Аутентификация: регистрация, вход/выход, защита от дублирования email; смена пароля в профиле.
- Профиль пользователя: редактирование имени/отчества/курса/группы, отображение последних ставок, количества и общей суммы.
- Каталог участниц: поиск по ФИО/группе/описанию на главной странице (доступна после входа); карточки с фото и описанием.
- Ставки: оформление с карточки участницы; лимит одной ставки до 1000 BYN, валидация суммы; динамический коэффициент на основе пула ставок с сглаживанием и ограничением в диапазоне 1.10–3.00.
- История ставок: таблица всех ставок пользователя с суммой, коэффициентом и датой.
- Управление: создание/редактирование/удаление участниц через формы проекта (ссылки видят администраторы); для администраторов доступно управление пользователями (список, создание, изменение ролей и активного статуса, удаление); доступ к стандартной панели Django admin на `/admin/`.
- Сидер демо-участниц с фото (`seed_candidates`)
- Запуск в Docker через `docker-compose`.

## Установка и запуск локально
Требования: Python 3.12+, pip.

1) Установить зависимости:
```bash
python -m venv .venv
# macOS/Linux:
source .venv/bin/activate
# Windows (PowerShell):
.venv\Scripts\Activate.ps1
pip install -r requirements.txt
```

2) Применить миграции и (опционально) подготовить данные:
```bash
python manage.py migrate
# демо-участницы с фото
python manage.py seed_candidates
# первый администратор (staff)
python manage.py createsuperuser
```

3) Запустить сервер разработки:
```bash
python manage.py runserver 0.0.0.0:8000
```
Приложение: http://localhost:8000/ (редирект на страницу входа, если не авторизованы).

### Запуск в Docker
```bash
docker-compose up --build
```
Контейнер автоматически применяет миграции и стартует на порту 8000. Остановка: `docker-compose down`. Дополнительные команды внутри контейнера (пример: миграции повторно):
```bash
docker-compose run --rm web python manage.py migrate
```
Загрузка демо‑данных (Docker):
```bash
docker-compose run --rm web python manage.py seed_candidates
```

## Создание администратора и admin panel
Создать суперпользователя (даёт доступ к Django admin и разделу управления в navbar):
```bash
python manage.py createsuperuser
```
В Docker:
```bash
docker-compose run --rm web python manage.py createsuperuser
```
Если нужен обычный пользователь со статусом admin, создайте его через `createsuperuser` или форму управления пользователями (доступна только staff), а затем в Django admin снимите флажок "superuser", оставив "staff".

Панель администратора Django: http://localhost:8000/admin/ (войти под суперпользователем).

## Запуск тестов
Локально:
```bash
python manage.py test
```
В Docker:
```bash
docker-compose run --rm web python manage.py test
```

## Сидинг данных
В проекте есть команда для загрузки демо‑участниц с фото. Её удобно запускать после миграций при первом старте, чтобы быстро проверить интерфейс.
